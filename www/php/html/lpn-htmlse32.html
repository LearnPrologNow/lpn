
<!--l. 23--> 
<div class="crosslinks"> 
<p class="noindent"> [ 
<a href="lpnpage.php?pagetype=html&pageid=lpn-htmlse39"> next 
</a> ] [ 
<a href="lpnpage.php?pagetype=html&pageid=lpn-htmlse28"> tail 
</a> ] [ 
<a href="lpnpage.php?pagetype=html&pageid=lpn-htmlch9"> up 
</a> ] 
</p> 
</div> 
<h3 class="sectionHead"> 
<span class="titlemark"> 8.1 
</span> 
<a id="x51-720008.1"> 
</a> Extra Arguments 
</h3> 
<!--l. 25--> 
<p class="noindent"> In the previous chapter we introduced basic DCG notation. But DCGs offer more than we&#8217;ve seen so far. For a start, DCGs allow us to specify extra arguments. Extra arguments can be used for many purposes; we&#8217;ll examine three. 
</p> 
<!--l. 33--> 
<p class="noindent"> 
</p> 
<h4 class="likesubsectionHead"> 
<a id="x51-730008.1"> 
</a> Context free grammars with features 
</h4> 
<!--l. 36--> 
<p class="noindent"> As a first example, let&#8217;s see how extra arguments can be used to add 
<span class="cmti-10"> features 
</span> to context-free grammars. 
</p> 
<!--l. 39--> 
<p class="indent"> Here&#8217;s the DCG we worked with in the previous chapter: 
</p> 
<!--l. 41--> 
<p class="indent"> 
</p> 
<div class="fancyvrb" id="fancyvrb343"> 
<a id="x51-73002r1"> 
</a> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np,vp. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73004r2"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73006r3"> 
</a> 
<span class="cmtt-10"> np 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;det,n. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73008r4"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73010r5"> 
</a> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v,np. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73012r6"> 
</a> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73014r7"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73016r8"> 
</a> 
<span class="cmtt-10"> det 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[the]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73018r9"> 
</a> 
<span class="cmtt-10"> det 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[a]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73020r10"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73022r11"> 
</a> 
<span class="cmtt-10"> n 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[woman]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73024r12"> 
</a> 
<span class="cmtt-10"> n 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[man]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73026r13"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73028r14"> 
</a> 
<span class="cmtt-10"> v 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[shoots]. 
</span> 
</div> 
<!--l. 58--> 
<p class="indent"> Now, suppose we wanted to deal with sentences like &#8220;She shoots him&#8221;, and &#8220;He shoots her&#8221;. What should we do? Well, obviously we should add rules saying that &#8220;he&#8221;, &#8220;she&#8221;, &#8220;him&#8221;, and &#8220;her&#8221; are pronouns: 
</p> 
<div class="fancyvrb" id="fancyvrb344"> 
<a id="x51-73030r1"> 
</a> 
<span class="cmtt-10"> pro 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[he]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73032r2"> 
</a> 
<span class="cmtt-10"> pro 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[she]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73034r3"> 
</a> 
<span class="cmtt-10"> pro 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[him]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73036r4"> 
</a> 
<span class="cmtt-10"> pro 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[her]. 
</span> 
</div> 
<!--l. 68--> 
<p class="noindent"> Furthermore, we should add a rule saying that noun phrases can be pronouns: 
</p> 
<div class="fancyvrb" id="fancyvrb345"> 
<a id="x51-73038r1"> 
</a> 
<span class="cmtt-10"> np 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;pro. 
</span> 
</div> 
<!--l. 74--> 
<p class="indent"> In this new DCG any good? Well, up to a point, it works. For example: 
</p> 
<div class="fancyvrb" id="fancyvrb346"> 
<a id="x51-73040r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s([she,shoots,him],[]). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73042r2"> 
</a> 
<span class="cmtt-10"> yes 
</span> 
</div> 
<!--l. 80--> 
<p class="indent"> But there&#8217;s an obvious problem. The DCG will also accept a lot of sentences that are clearly wrong, such as &#8220;A woman shoots she&#8221;, &#8220;Her shoots a man&#8221;, and &#8220;Her shoots she&#8221;: 
</p> 
<div class="fancyvrb" id="fancyvrb347"> 
<a id="x51-73044r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s([a,woman,shoots,she],[]). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73046r2"> 
</a> 
<span class="cmtt-10"> yes 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73048r3"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73050r4"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s([her,shoots,a,man],[]). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73052r5"> 
</a> 
<span class="cmtt-10"> yes 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73054r6"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73056r7"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s([her,shoots,she],[]). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73058r8"> 
</a> 
<span class="cmtt-10"> yes 
</span> 
</div> 
<!--l. 94--> 
<p class="indent"> That is, the grammar doesn&#8217;t know that &#8220;she&#8221; and &#8220;he&#8221; are 
<span class="cmti-10"> subject 
</span> pronouns and cannot be used in 
<span class="cmti-10"> object 
</span> position; thus &#8220;A woman shoots she&#8221; is bad because it violates this basic fact about English. Moreover, the grammar doesn&#8217;t know that &#8220;her&#8221; and &#8220;him&#8221; are 
<span class="cmti-10"> object 
</span> pronouns and cannot be used in 
<span class="cmti-10"> subject 
</span> position; thus &#8220;Her shoots a man&#8221; is bad because it violates this constraint. As for &#8220;Her shoots she&#8221;, this manages to get both matters wrong at once. 
</p> 
<!--l. 101--> 
<p class="indent"> Now, it&#8217;s pretty obvious 
<span class="cmti-10"> what 
</span> we have to do to put this right: we need to extend the DCG with information about which pronouns can occur in subject position and which in object position. The interesting question: 
<span class="cmti-10"> how 
</span> exactly are we to do this? First let&#8217;s look at a naive way of correcting this, namely adding new rules: 
</p> 
<!--l. 107--> 
<p class="indent"> 
</p> 
<div class="fancyvrb" id="fancyvrb348"> 
<a id="x51-73060r1"> 
</a> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np_subject,vp. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73062r2"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73064r3"> 
</a> 
<span class="cmtt-10"> np_subject 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;det,n. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73066r4"> 
</a> 
<span class="cmtt-10"> np_object 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;det,n. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73068r5"> 
</a> 
<span class="cmtt-10"> np_subject 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;pro_subject. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73070r6"> 
</a> 
<span class="cmtt-10"> np_object 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;pro_object. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73072r7"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73074r8"> 
</a> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v,np_object. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73076r9"> 
</a> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73078r10"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73080r11"> 
</a> 
<span class="cmtt-10"> det 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[the]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73082r12"> 
</a> 
<span class="cmtt-10"> det 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[a]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73084r13"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73086r14"> 
</a> 
<span class="cmtt-10"> n 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[woman]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73088r15"> 
</a> 
<span class="cmtt-10"> n 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[man]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73090r16"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73092r17"> 
</a> 
<span class="cmtt-10"> pro_subject 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[he]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73094r18"> 
</a> 
<span class="cmtt-10"> pro_subject 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[she]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73096r19"> 
</a> 
<span class="cmtt-10"> pro_object 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[him]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73098r20"> 
</a> 
<span class="cmtt-10"> pro_object 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[her]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73100r21"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73102r22"> 
</a> 
<span class="cmtt-10"> v 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[shoots]. 
</span> 
</div> 
<!--l. 133--> 
<p class="indent"> Now this solution &#8220;works&#8221;. For example, 
</p> 
<div class="fancyvrb" id="fancyvrb349"> 
<a id="x51-73104r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s([her,shoots,she],[]). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73106r2"> 
</a> 
<span class="cmtt-10"> no 
</span> 
</div> 
<!--l. 139--> 
<p class="indent"> But neither computer scientists nor linguists would consider this a good solution. The trouble is, a small addition to the lexicon has led to quite a big change in the DCG. Let&#8217;s face it: &#8220;she&#8221; and &#8220;her&#8221; (and &#8220;he&#8221; and &#8220;him&#8221;) are the same in a lot of respects. But to deal with the property in which they differ (namely, in which position they can occur in sentences) we&#8217;ve had to make big changes to the grammar: in particular, we&#8217;ve doubled the number of noun phrase rules. If we had to make further changes (for example, to cope with plural noun phrases) things would get even worse. What we really need is a more delicate programming mechanism that allows us to cope with such facts without being forced to add rules all the time. And here&#8217;s where the extra arguments come into play. Look at the following grammar: 
</p> 
<!--l. 153--> 
<p class="indent"> 
</p> 
<div class="fancyvrb" id="fancyvrb350"> 
<a id="x51-73108r1"> 
</a> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np(subject),vp. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73110r2"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73112r3"> 
</a> 
<span class="cmtt-10"> np(_) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;det,n. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73114r4"> 
</a> 
<span class="cmtt-10"> np(X) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;pro(X). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73116r5"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73118r6"> 
</a> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v,np(object). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73120r7"> 
</a> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73122r8"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73124r9"> 
</a> 
<span class="cmtt-10"> det 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[the]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73126r10"> 
</a> 
<span class="cmtt-10"> det 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[a]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73128r11"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73130r12"> 
</a> 
<span class="cmtt-10"> n 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[woman]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73132r13"> 
</a> 
<span class="cmtt-10"> n 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[man]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73134r14"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73136r15"> 
</a> 
<span class="cmtt-10"> pro(subject) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[he]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73138r16"> 
</a> 
<span class="cmtt-10"> pro(subject) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[she]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73140r17"> 
</a> 
<span class="cmtt-10"> pro(object) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[him]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73142r18"> 
</a> 
<span class="cmtt-10"> pro(object) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[her]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73144r19"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73146r20"> 
</a> 
<span class="cmtt-10"> v 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[shoots]. 
</span> 
</div> 
<!--l. 179--> 
<p class="indent"> The key thing to note is that this new grammar contains only one new noun phrase rule. In fact, it is very similar to the first grammar that we wrote, except that now the symbol 
<span class="verb"> 
<span class="cmtt-10"> np 
</span> 
</span> is associated with a new argument, either 
<span class="verb"> 
<span class="cmtt-10"> subject 
</span> 
</span> , 
<span class="verb"> 
<span class="cmtt-10"> object 
</span> 
</span> , 
<span class="verb"> 
<span class="cmtt-10"> _ 
</span> 
</span> or 
<span class="verb"> 
<span class="cmtt-10"> X 
</span> 
</span> . A linguist would say that we&#8217;ve added features to distinguish various kinds of noun phrase. In particular, note the four rules for the pronouns. Here we&#8217;ve used the extra argument to state which pronouns can occur in subject position, and which can occur in object position. Thus these rules are the most fundamental, for they give us the basic facts about how these pronouns can be used. 
</p> 
<!--l. 190--> 
<p class="indent"> So what do the other rules do? Well, intuitively, the rule 
</p> 
<div class="fancyvrb" id="fancyvrb351"> 
<a id="x51-73148r1"> 
</a> 
<span class="cmtt-10"> np(X) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;pro(X). 
</span> 
</div> 
<!--l. 194--> 
<p class="noindent"> uses the extra argument (the variable 
<span class="verb"> 
<span class="cmtt-10"> X 
</span> 
</span> ) to pass these basic facts about pronouns up to noun phrases built out of them: because the variable 
<span class="verb"> 
<span class="cmtt-10"> X 
</span> 
</span> is used as the extra argument for both the np and the pronoun, Prolog unification will guarantee that they will be given the same value. In particular, if the pronoun we use is &#8220;she&#8221; (in which case 
<span class="verb"> 
<span class="cmtt-10"> X=subject 
</span> 
</span> ), then the np will (through its extra argument 
<span class="verb"> 
<span class="cmtt-10"> X=subject 
</span> 
</span> ) be marked as a subject np. On the other hand, if the pronoun we use is &#8220;her&#8221; (in which case 
<span class="verb"> 
<span class="cmtt-10"> X=object 
</span> 
</span> ), then the extra argument for np will be marked 
<span class="verb"> 
<span class="cmtt-10"> X=object 
</span> 
</span> too. And this, of course, is exactly the behaviour we want. 
</p> 
<!--l. 205--> 
<p class="indent"> On the other hand, although noun phrases built using the rule 
</p> 
<div class="fancyvrb" id="fancyvrb352"> 
<a id="x51-73150r1"> 
</a> 
<span class="cmtt-10"> np(_) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;det,n. 
</span> 
</div> 
<!--l. 209--> 
<p class="noindent"> also have an extra argument, we&#8217;ve used the anonymous variable as its value. Essentially this means 
<span class="cmti-10"> can be either 
</span> , which is correct, for expressions built using this rule (such as &#8220;the man&#8221; and &#8220;a woman&#8221;) can be used in both subject and object position. 
</p> 
<!--l. 214--> 
<p class="indent"> Now consider the rule 
</p> 
<div class="fancyvrb" id="fancyvrb353"> 
<a id="x51-73152r1"> 
</a> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v,np(object). 
</span> 
</div> 
<!--l. 218--> 
<p class="noindent"> This says that to apply this rule we need to use a noun phrase whose extra argument unifies with 
<span class="verb"> 
<span class="cmtt-10"> object 
</span> 
</span> . This can be 
<span class="cmti-10"> either 
</span> noun phrases built from object pronouns 
<span class="cmti-10"> or 
</span> noun phrases such as &#8220;the man&#8221; and &#8220;a woman&#8221; which have the anonymous variable as the value of the extra argument. Crucially, pronouns marked has having 
<span class="verb"> 
<span class="cmtt-10"> subject 
</span> 
</span> as the value of the extra argument 
<span class="cmti-10"> can&#8217;t 
</span> be used here: the atoms 
<span class="verb"> 
<span class="cmtt-10"> object 
</span> 
</span> and 
<span class="verb"> 
<span class="cmtt-10"> subject 
</span> 
</span> don&#8217;t unify. Note that the rule 
</p> 
<div class="fancyvrb" id="fancyvrb354"> 
<a id="x51-73154r1"> 
</a> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np(subject),vp. 
</span> 
</div> 
<!--l. 229--> 
<p class="noindent"> works in an analogous fashion to prevent noun phrases made of object pronouns from ending up in subject position. 
</p> 
<!--l. 232--> 
<p class="indent"> This works. You can check it out by posing the query: 
</p> 
<div class="fancyvrb" id="fancyvrb355"> 
<a id="x51-73156r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s(X,[]). 
</span> 
</div> 
<!--l. 236--> 
<p class="noindent"> As you step through the responses, you&#8217;ll see that only acceptable English is generated. 
</p> 
<!--l. 239--> 
<p class="indent"> But while the intuitive explanation just given is correct, what&#8217;s 
<span class="cmti-10"> really 
</span> going on? The key thing to remember is that DCG rules are just a convenient abbreviation. For example, the rule 
</p> 
<div class="fancyvrb" id="fancyvrb356"> 
<a id="x51-73158r1"> 
</a> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np,vp. 
</span> 
</div> 
<!--l. 246--> 
<p class="noindent"> is really syntactic sugar for 
</p> 
<div class="fancyvrb" id="fancyvrb357"> 
<a id="x51-73160r1"> 
</a> 
<span class="cmtt-10"> s(A,B) 
</span> 
<span class="cmtt-10"> &#x00A0;:- 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73162r2"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;np(A,C), 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73164r3"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;vp(C,B). 
</span> 
</div> 
<!--l. 252--> 
<p class="noindent"> That is, as we learned in the previous chapter, the DCG notation is a way of hiding the two arguments responsible for the difference list representation, so that we don&#8217;t have to think about them. We work with the nice user-friendly notation, and Prolog translates it into the clauses just given. 
</p> 
<!--l. 258--> 
<p class="indent"> Ok, so we obviously need to ask what 
</p> 
<div class="fancyvrb" id="fancyvrb358"> 
<a id="x51-73166r1"> 
</a> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np(subject),vp. 
</span> 
</div> 
<!--l. 262--> 
<p class="noindent"> translates into. Here&#8217;s the answer: 
</p> 
<div class="fancyvrb" id="fancyvrb359"> 
<a id="x51-73168r1"> 
</a> 
<span class="cmtt-10"> s(A,B) 
</span> 
<span class="cmtt-10"> &#x00A0;:- 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73170r2"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;np(subject,A,C), 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73172r3"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;vp(C,B). 
</span> 
</div> 
<!--l. 269--> 
<p class="indent"> As should now be clear, the name &#8220;extra argument&#8221; is a good one: as this translation makes clear, the 
<span class="verb"> 
<span class="cmtt-10"> subject 
</span> 
</span> symbol really 
<span class="cmti-10"> is 
</span> just one more argument in an ordinary Prolog rule. Similarly, our noun phrase DCG rules translate into 
</p> 
<div class="fancyvrb" id="fancyvrb360"> 
<a id="x51-73174r1"> 
</a> 
<span class="cmtt-10"> np(A,B,C) 
</span> 
<span class="cmtt-10"> &#x00A0;:- 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73176r2"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;det(B,D), 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73178r3"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;n(D,C). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73180r4"> 
</a> 
<span class="cmtt-10"> np(A,B,C) 
</span> 
<span class="cmtt-10"> &#x00A0;:- 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73182r5"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;pro(A,B,C). 
</span> 
</div> 
<!--l. 280--> 
<p class="noindent"> Note that both rules have 
<span class="cmti-10"> three 
</span> arguments. The first, 
<span class="verb"> 
<span class="cmtt-10"> A 
</span> 
</span> , is the extra argument, and the last two are the ordinary, hidden DCG arguments (the two hidden arguments are always the last two arguments). 
</p> 
<!--l. 285--> 
<p class="indent"> Incidentally, how do you think we would use the grammar to list the grammatical noun phrases? Well, if we had been working with the DCG rule 
<span class="verb"> 
<span class="cmtt-10"> np 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;det,n 
</span> 
</span> (that is, a rule with no extra arguments) we would have made the query 
</p> 
<div class="fancyvrb" id="fancyvrb361"> 
<a id="x51-73184r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;np(NP,[]). 
</span> 
</div> 
<!--l. 292--> 
<p class="noindent"> So, in view of what we have just learned about extra arguments, it&#8217;s not too surprising that we need to pose the query 
</p> 
<div class="fancyvrb" id="fancyvrb362"> 
<a id="x51-73186r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;np(X,NP,[]). 
</span> 
</div> 
<!--l. 297--> 
<p class="noindent"> when working with our new DCG. And here&#8217;s what the response would be: 
</p> 
<div class="fancyvrb" id="fancyvrb363"> 
<a id="x51-73188r1"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;_2625 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73190r2"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[the,woman] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73192r3"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73194r4"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;_2625 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73196r5"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[the,man] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73198r6"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73200r7"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;_2625 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73202r8"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[a,woman] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73204r9"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73206r10"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;_2625 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73208r11"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[a,man] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73210r12"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73212r13"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;subject 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73214r14"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[he] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73216r15"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73218r16"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;subject 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73220r17"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[she] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73222r18"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73224r19"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;object 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73226r20"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[him] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73228r21"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73230r22"> 
</a> 
<span class="cmtt-10"> X 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;object 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73232r23"> 
</a> 
<span class="cmtt-10"> NP 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[her] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-73234r24"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-73236r25"> 
</a> 
<span class="cmtt-10"> no 
</span> 
</div> 
<!--l. 329--> 
<p class="indent"> One final remark: don&#8217;t be misled by this simplicity of our example grammar. Extra arguments can be used to cope with some complex syntactic problems. DCGs are no longer the state-of-the-art grammar development tools they once were, but they&#8217;re not toys either. Once you know about writing DCGs with extra arguments, you can write some fairly sophisticated grammars. 
</p> 
<!--l. 336--> 
<p class="noindent"> 
</p> 
<h4 class="likesubsectionHead"> 
<a id="x51-740008.1"> 
</a> Building parse trees 
</h4> 
<!--l. 340--> 
<p class="noindent"> So far, the programs we have discussed have been able to 
<span class="cmti-10"> recognise 
</span> grammatical structure (that is, they could correctly answer yes or no when asked whether the input was a sentence, a noun phrase, and so on) and to 
<span class="cmti-10"> generate 
</span> grammatical output. This is pleasant, but we would also like to be able to 
<span class="cmti-10"> parse 
</span> . That is, we would like our programs not only to tell us 
<span class="cmti-10"> which 
</span> sentences are grammatical, but also to give us an analysis of their structure. In particular, we would like to see the trees the grammar assigns to sentences. 
</p> 
<!--l. 351--> 
<p class="indent"> Well, using only standard Prolog tools we can&#8217;t actually draw nice pictures of trees, but we 
<span class="cmti-10"> can 
</span> build data structures which describe trees in a clear way. For example, corresponding to the tree 
</p> 
<!--l. 355--> 
<p class="indent"> 
</p> 
<div class="quote"> 
<!--l. 365--> 
<p class="noindent"> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> np 
</span> 
<span class="cmtt-10"> det 
</span> 
<span class="cmtt-10"> a 
</span> 
<span class="cmtt-10"> n 
</span> 
<span class="cmtt-10"> woman 
</span> 
<span class="cmtt-10"> vp 
</span> 
<span class="cmtt-10"> v 
</span> 
<span class="cmtt-10"> shoots 
</span> 
</p> 
</div> 
<!--l. 368--> 
<p class="noindent"> we could have the following term: 
</p> 
<div class="fancyvrb" id="fancyvrb364"> 
<a id="x51-74002r1"> 
</a> 
<span class="cmtt-10"> s(np(det(a),n(woman)),vp(v(shoots))). 
</span> 
</div> 
<!--l. 372--> 
<p class="noindent"> Sure: it doesn&#8217;t 
<span class="cmti-10"> look 
</span> as nice, but all the information in the picture is there. And, with the aid of a decent graphics package, it would be easy to turn this term into a picture. 
</p> 
<!--l. 376--> 
<p class="indent"> But how do we get DCGs to build such terms? Actually, it&#8217;s pretty easy. After all, in effect a DCG has to work out what the tree structure is when recognising a sentence. So we just need to find a way of keeping track of the structure that the DCG finds. We do this by adding extra arguments. Here&#8217;s how: 
</p> 
<div class="fancyvrb" id="fancyvrb365"> 
<a id="x51-74004r1"> 
</a> 
<span class="cmtt-10"> s(s(NP,VP)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np(NP),vp(VP). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74006r2"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-74008r3"> 
</a> 
<span class="cmtt-10"> np(np(DET,N)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;det(DET),n(N). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74010r4"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-74012r5"> 
</a> 
<span class="cmtt-10"> vp(vp(V,NP)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v(V),np(NP). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74014r6"> 
</a> 
<span class="cmtt-10"> vp(vp(V)) 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v(V). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74016r7"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-74018r8"> 
</a> 
<span class="cmtt-10"> det(det(the)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[the]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74020r9"> 
</a> 
<span class="cmtt-10"> det(det(a)) 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[a]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74022r10"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-74024r11"> 
</a> 
<span class="cmtt-10"> n(n(woman)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[woman]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74026r12"> 
</a> 
<span class="cmtt-10"> n(n(man)) 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[man]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74028r13"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-74030r14"> 
</a> 
<span class="cmtt-10"> v(v(shoots)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[shoots]. 
</span> 
</div> 
<!--l. 399--> 
<p class="indent"> What&#8217;s going on here? Essentially we are building the parse trees for the syntactic categories on the left hand side of the rules out of the parse trees for the syntactic categories on the right hand side of the rules. Consider the rule 
<span class="verb"> 
<span class="cmtt-10"> vp(vp(V,NP)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;v(V),np(NP) 
</span> 
</span> . When we make a query using this DCG, the 
<span class="verb"> 
<span class="cmtt-10"> V 
</span> 
</span> in 
<span class="verb"> 
<span class="cmtt-10"> v(V) 
</span> 
</span> and the 
<span class="verb"> 
<span class="cmtt-10"> NP 
</span> 
</span> in 
<span class="verb"> 
<span class="cmtt-10"> np(NP) 
</span> 
</span> will be instantiated to terms representing parse trees. For example, perhaps 
<span class="verb"> 
<span class="cmtt-10"> V 
</span> 
</span> will be instantiated to 
</p> 
<div class="fancyvrb" id="fancyvrb366"> 
<a id="x51-74032r1"> 
</a> 
<span class="cmtt-10"> v(shoots) 
</span> 
</div> 
<!--l. 409--> 
<p class="noindent"> and 
<span class="verb"> 
<span class="cmtt-10"> NP 
</span> 
</span> will be instantiated to 
</p> 
<div class="fancyvrb" id="fancyvrb367"> 
<a id="x51-74034r1"> 
</a> 
<span class="cmtt-10"> np(det(a),n(woman)). 
</span> 
</div> 
<!--l. 413--> 
<p class="noindent"> What is the term corresponding to a vp made out of these two structures? Obviously it should be this: 
</p> 
<div class="fancyvrb" id="fancyvrb368"> 
<a id="x51-74036r1"> 
</a> 
<span class="cmtt-10"> vp(v(shoots),np(det(a),n(woman))). 
</span> 
</div> 
<!--l. 418--> 
<p class="noindent"> And this is precisely what the extra argument 
<span class="verb"> 
<span class="cmtt-10"> vp(V,NP) 
</span> 
</span> given in the rule 
<span class="verb"> 
<span class="cmtt-10"> vp(vp(V,NP)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
</span> 
<span class="verb"> 
<span class="cmtt-10"> v(V),np(NP) 
</span> 
</span> returns to us: a term whose functor is 
<span class="verb"> 
<span class="cmtt-10"> vp 
</span> 
</span> , and whose first and second arguments are the values of 
<span class="verb"> 
<span class="cmtt-10"> V 
</span> 
</span> and 
<span class="verb"> 
<span class="cmtt-10"> NP 
</span> 
</span> respectively. To put it informally: it plugs the 
<span class="verb"> 
<span class="cmtt-10"> V 
</span> 
</span> and the 
<span class="verb"> 
<span class="cmtt-10"> NP 
</span> 
</span> terms together under a 
<span class="verb"> 
<span class="cmtt-10"> vp 
</span> 
</span> functor. 
</p> 
<!--l. 424--> 
<p class="indent"> To parse the sentence &#8220;A woman shoots&#8221; we pose the query: 
</p> 
<div class="fancyvrb" id="fancyvrb369"> 
<a id="x51-74038r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s(T,[a,woman,shoots],[]). 
</span> 
</div> 
<!--l. 428--> 
<p class="noindent"> That is, we ask for the extra argument 
<span class="verb"> 
<span class="cmtt-10"> T 
</span> 
</span> to be instantiated to a parse tree for the sentence. And we get: 
</p> 
<div class="fancyvrb" id="fancyvrb370"> 
<a id="x51-74040r1"> 
</a> 
<span class="cmtt-10"> T 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;s(np(det(a),n(woman)),vp(v(shoots))) 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74042r2"> 
</a> 
<span class="cmtt-10"> yes 
</span> 
</div> 
<!--l. 435--> 
<p class="indent"> Furthermore, we can generate all parse trees by making the following query: 
</p> 
<div class="fancyvrb" id="fancyvrb371"> 
<a id="x51-74044r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s(T,S,[]). 
</span> 
</div> 
<!--l. 440--> 
<p class="noindent"> The first three responses are: 
</p> 
<div class="fancyvrb" id="fancyvrb372"> 
<a id="x51-74046r1"> 
</a> 
<span class="cmtt-10"> T 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;s(np(det(the),n(woman)), 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74048r2"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;vp(v(shoots),np(det(the),n(woman)))) 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74050r3"> 
</a> 
<span class="cmtt-10"> S 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[the,woman,shoots,the,woman] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74052r4"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-74054r5"> 
</a> 
<span class="cmtt-10"> T 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;s(np(det(the),n(woman)), 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74056r6"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;vp(v(shoots),np(det(the),n(man)))) 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74058r7"> 
</a> 
<span class="cmtt-10"> S 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[the,woman,shoots,the,man] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74060r8"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-74062r9"> 
</a> 
<span class="cmtt-10"> T 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;s(np(det(the),n(woman)), 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74064r10"> 
</a> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0; 
</span> 
<span class="cmtt-10"> &#x00A0;vp(v(shoots),np(det(a),n(woman)))) 
</span> 
<br class="fancyvrb" /> 
<a id="x51-74066r11"> 
</a> 
<span class="cmtt-10"> S 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[the,woman,shoots,a,woman] 
</span> 
</div> 
<!--l. 454--> 
<p class="noindent"> In short, we have just seen an elegant (and useful) example of how to build structure using unification. 
</p> 
<!--l. 457--> 
<p class="indent"> Extra arguments can also be used to build semantic representations. Now, we did not say anything about what the words in our little DCG mean. In fact, nowadays a lot is known about the semantics of natural languages, and it is surprisingly easy to build semantic representations which partially capture the meaning of sentences or even entire discourses. Such representations are usually expressions of some formal language (for example first-order logic, discourse representation structures, or a database query language) and they are usually built up compositionally. That is, the meaning of each word is expressed in the formal language; this meaning is given as an extra argument in the DCG entries for the individual words. Then, for each rule in the grammar, an extra argument shows how to combine the meaning of the two subcomponents. For example, to the rule 
<span class="verb"> 
<span class="cmtt-10"> s 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;np, 
</span> 
<span class="cmtt-10"> &#x00A0;vp 
</span> 
</span> we would add an extra argument stating how to combine the 
<span class="verb"> 
<span class="cmtt-10"> np 
</span> 
</span> meaning and the 
<span class="verb"> 
<span class="cmtt-10"> vp 
</span> 
</span> meaning to form the 
<span class="verb"> 
<span class="cmtt-10"> s 
</span> 
</span> meaning. Although somewhat more complex, the semantic construction process is quite like the way we built up the parse tree for the sentence from the parse tree of its subparts. 
<span class="footnote-mark"> 
<a href="lpnpage.php?pagetype=html&pageid=lpn-html52"> 
<sup class="textsuperscript"> 1 
</sup> 
</a> 
</span> 
<a id="x51-74067f1"> 
</a> 
</p> 
<h4 class="likesubsectionHead"> 
<a id="x51-750008.1"> 
</a> Beyond context free languages 
</h4> 
<!--l. 485--> 
<p class="noindent"> In the previous chapter we introduced DCGs as a useful Prolog tool for representing and working with context free grammars. Now, this is certainly a good way of thinking about DCGs, but it&#8217;s not the whole story. For the fact of the matter is: DCGs can deal with a lot more than just context free languages. The extra arguments we have been discussing (and indeed, the extra goals we shall introduce shortly) give us the tools for coping with any computable language whatsoever. We shall illustrate this by presenting a simple DCG for the formal language 
<span class="cmmi-10"> a 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmmi-10"> b 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmmi-10"> c 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmsy-10"> \{ 
</span> 
<span class="cmmi-10"> &#x03F5; 
</span> 
<span class="cmsy-10"> } 
</span> . 
</p> 
<!--l. 495--> 
<p class="indent"> The formal language 
<span class="cmmi-10"> a 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmmi-10"> b 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmmi-10"> c 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmsy-10"> \{ 
</span> 
<span class="cmmi-10"> &#x03F5; 
</span> 
<span class="cmsy-10"> } 
</span> consists of all non-null strings made up of 
<span class="verb"> 
<span class="cmtt-10"> a 
</span> 
</span> s, 
<span class="verb"> 
<span class="cmtt-10"> b 
</span> 
</span> s, and 
<span class="verb"> 
<span class="cmtt-10"> c 
</span> 
</span> s which consist of an unbroken block of 
<span class="verb"> 
<span class="cmtt-10"> a 
</span> 
</span> s, followed by an unbroken block of 
<span class="verb"> 
<span class="cmtt-10"> b 
</span> 
</span> s, followed by an unbroken block of 
<span class="verb"> 
<span class="cmtt-10"> c 
</span> 
</span> s, all three blocks having the same length. For example, 
<span class="verb"> 
<span class="cmtt-10"> abc 
</span> 
</span> , and 
<span class="verb"> 
<span class="cmtt-10"> aabbcc 
</span> 
</span> and 
<span class="verb"> 
<span class="cmtt-10"> aaabbbccc 
</span> 
</span> all belong to 
<span class="cmmi-10"> a 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmmi-10"> b 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmmi-10"> c 
</span> 
<sup> 
<span class="cmmi-7"> n 
</span> 
</sup> 
<span class="cmsy-10"> \{ 
</span> 
<span class="cmmi-10"> &#x03F5; 
</span> 
<span class="cmsy-10"> } 
</span> . 
</p> 
<!--l. 503--> 
<p class="indent"> The interesting thing about this language is that it is 
<span class="cmti-10"> not 
</span> context free. Try whatever you like, you will not succeed in writing a context free grammar that generates precisely these strings. Proving this would take us too far afield, but the proof is not particularly difficult, and you can find it in many books on formal language theory. 
</p> 
<!--l. 510--> 
<p class="indent"> On the other hand, as we shall now see, it is very easy to write a DCG that generates this language. Just as we did in the previous chapter, we shall represent strings as lists; for example, the string 
<span class="verb"> 
<span class="cmtt-10"> abc 
</span> 
</span> will be represented using the list 
<span class="verb"> 
<span class="cmtt-10"> [a,b,c] 
</span> 
</span> . Given this convention, here&#8217;s the DCG we need: 
</p> 
<div class="fancyvrb" id="fancyvrb373"> 
<a id="x51-75002r1"> 
</a> 
<span class="cmtt-10"> s(Count) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;ablock(Count),bblock(Count),cblock(Count). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75004r2"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-75006r3"> 
</a> 
<span class="cmtt-10"> ablock(0) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75008r4"> 
</a> 
<span class="cmtt-10"> ablock(succ(Count)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[a],ablock(Count). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75010r5"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-75012r6"> 
</a> 
<span class="cmtt-10"> bblock(0) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75014r7"> 
</a> 
<span class="cmtt-10"> bblock(succ(Count)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[b],bblock(Count). 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75016r8"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-75018r9"> 
</a> 
<span class="cmtt-10"> cblock(0) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[]. 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75020r10"> 
</a> 
<span class="cmtt-10"> cblock(succ(Count)) 
</span> 
<span class="cmtt-10"> &#x00A0;--&#x003E; 
</span> 
<span class="cmtt-10"> &#x00A0;[c],cblock(Count). 
</span> 
</div> 
<!--l. 529--> 
<p class="indent"> The idea underlying this DCG is fairly simple: we use an extra argument to keep track of the length of the blocks. The 
<span class="verb"> 
<span class="cmtt-10"> s 
</span> 
</span> rule simply says that we want a block of 
<span class="verb"> 
<span class="cmtt-10"> a 
</span> 
</span> s followed by a block of 
<span class="verb"> 
<span class="cmtt-10"> b 
</span> 
</span> s followed by block of 
<span class="verb"> 
<span class="cmtt-10"> c 
</span> 
</span> s, and all three blocks are to have the same length, namely 
<span class="verb"> 
<span class="cmtt-10"> Count 
</span> 
</span> . 
</p> 
<!--l. 535--> 
<p class="indent"> What should the values of 
<span class="verb"> 
<span class="cmtt-10"> Count 
</span> 
</span> be? The obvious answer is: 
<span class="verb"> 
<span class="cmtt-10"> 1 
</span> 
</span> , 
<span class="verb"> 
<span class="cmtt-10"> 2 
</span> 
</span> , 
<span class="verb"> 
<span class="cmtt-10"> 3 
</span> 
</span> , 
<span class="verb"> 
<span class="cmtt-10"> 4 
</span> 
</span> , and so on. But as yet we don&#8217;t know how to mix DCGs and arithmetic, so this isn&#8217;t very helpful. Fortunately, as this DCG shows, there&#8217;s an easier (and more elegant) way. Represent the number 0 by 
<span class="verb"> 
<span class="cmtt-10"> 0 
</span> 
</span> , the number 1 by 
<span class="verb"> 
<span class="cmtt-10"> succ(0) 
</span> 
</span> , the number 2 by 
<span class="verb"> 
<span class="cmtt-10"> succ(succ(0)) 
</span> 
</span> , the number 3 by 
<span class="verb"> 
<span class="cmtt-10"> succ(succ(succ(0))) 
</span> 
</span> , and so on, just as we did it in Chapter&#x00A0;3 (as we said in Chapter&#x00A0;3, you can read 
<span class="verb"> 
<span class="cmtt-10"> succ 
</span> 
</span> as &#8220;successor of&#8221;). This choice of notation enables us to count using unification. 
</p> 
<!--l. 545--> 
<p class="indent"> And this is precisely what our new DCG does. For example, suppose we pose the following query: 
</p> 
<div class="fancyvrb" id="fancyvrb374"> 
<a id="x51-75022r1"> 
</a> 
<span class="cmtt-10"> ?- 
</span> 
<span class="cmtt-10"> &#x00A0;s(Count,L,[]). 
</span> 
</div> 
<!--l. 550--> 
<p class="noindent"> which asks Prolog to generate the lists 
<span class="verb"> 
<span class="cmtt-10"> L 
</span> 
</span> of symbols that belong to this language, and to give the value of 
<span class="verb"> 
<span class="cmtt-10"> Count 
</span> 
</span> needed to produce each item. Then the first four responses are: 
</p> 
<div class="fancyvrb" id="fancyvrb375"> 
<a id="x51-75024r1"> 
</a> 
<span class="cmtt-10"> Count 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;0 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75026r2"> 
</a> 
<span class="cmtt-10"> L 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75028r3"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-75030r4"> 
</a> 
<span class="cmtt-10"> Count 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;succ(0) 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75032r5"> 
</a> 
<span class="cmtt-10"> L 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[a, 
</span> 
<span class="cmtt-10"> &#x00A0;b, 
</span> 
<span class="cmtt-10"> &#x00A0;c] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75034r6"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-75036r7"> 
</a> 
<span class="cmtt-10"> Count 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;succ(succ(0)) 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75038r8"> 
</a> 
<span class="cmtt-10"> L 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[a, 
</span> 
<span class="cmtt-10"> &#x00A0;a, 
</span> 
<span class="cmtt-10"> &#x00A0;b, 
</span> 
<span class="cmtt-10"> &#x00A0;b, 
</span> 
<span class="cmtt-10"> &#x00A0;c, 
</span> 
<span class="cmtt-10"> &#x00A0;c] 
</span> 
<span class="cmtt-10"> &#x00A0;; 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75040r9"> 
</a> 
<br class="fancyvrb" /> 
<a id="x51-75042r10"> 
</a> 
<span class="cmtt-10"> Count 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;succ(succ(succ(0))) 
</span> 
<br class="fancyvrb" /> 
<a id="x51-75044r11"> 
</a> 
<span class="cmtt-10"> L 
</span> 
<span class="cmtt-10"> &#x00A0;= 
</span> 
<span class="cmtt-10"> &#x00A0;[a, 
</span> 
<span class="cmtt-10"> &#x00A0;a, 
</span> 
<span class="cmtt-10"> &#x00A0;a, 
</span> 
<span class="cmtt-10"> &#x00A0;b, 
</span> 
<span class="cmtt-10"> &#x00A0;b, 
</span> 
<span class="cmtt-10"> &#x00A0;b, 
</span> 
<span class="cmtt-10"> &#x00A0;c, 
</span> 
<span class="cmtt-10"> &#x00A0;c, 
</span> 
<span class="cmtt-10"> &#x00A0;c] 
</span> 
</div> 
<!--l. 567--> 
<p class="indent"> The value of 
<span class="verb"> 
<span class="cmtt-10"> Count 
</span> 
</span> clearly corresponds to the length of the blocks. 
</p> 
<!--l. 570--> 
<p class="indent"> So: DCGs are not just a tool for working with context free grammars. They are strictly more powerful than that, and (as we&#8217;ve just seen) part of the extra power comes from the use of extra arguments. 
</p> 
<!--l. 575--> 
<div class="crosslinks"> 
<p class="noindent"> [ 
<a href="lpnpage.php?pagetype=html&pageid=lpn-htmlse39"> next 
</a> ] [ 
<a href="lpnpage.php?pagetype=html&pageid=lpn-htmlse32"> front 
</a> ] [ 
<a href="lpnpage.php?pagetype=html&pageid=lpn-htmlch9"> up 
</a> ] 
</p> 
</div> 
<!--l. 575--> 
<p class="indent"> 
<a id="taillpn-htmlse32"> 
</a> 
</p> 